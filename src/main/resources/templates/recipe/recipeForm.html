<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('preview').src = e.target.result;
                };
                reader.readAsDataURL(input.files[0]);
            } else {
                document.getElementById('preview').src = "";
            }
        }

        function addIngredient() {
            var ingredientList = document.getElementById("ingredient");
            var newIngredient = document.querySelector("#ingredient li").cloneNode(true);

            newIngredient.querySelectorAll("input, select").forEach(function(element) {
                element.value = "";
            });

            ingredientList.appendChild(newIngredient);
        }
    </script>
</head>
<body>
<form action="" method="post" th:object="${recipeForm}" enctype="multipart/form-data">
    요리명 <input type="text" th:field="*{title}" >
    요리 소개 <input type="text" th:field="*{instruction}" >
    요리 이미지 <input type="file" th:field="*{thumbnail}" onchange="readURL(this)"> <br>
    <img id="preview" width="500" height="333"/>

    <div id="ingredient">
        재료정보
        <li>
            <input type="text" th:field="*{ingredientName}" placeholder="(재료명)">
            <input type="number" th:field="*{quantity}" placeholder="(수량)">
            <select th:field="*{unit}">
                <option value="">==단위 선택==</option>
                <option th:each="unit : ${units}" th:value="${unit.symbol}"
                        th:text="${unit.symbol}">FAST</option>
            </select>
        </li>
    </div>
    <input type="submit" value="레시피 등록">
</form>
<button onclick="addIngredient()">재료추가</button>
</body>
</html>